(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{171:function(t,e,s){"use strict";s.r(e);s(30);var n=s(4),r=s.n(n),a={props:{user:{type:Object,required:!0}},data:function(){return{role:null,loading:!1}},methods:{addRole:function(){var t=r()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this.role){t.next=4;break}this.$toast.open({duration:3e3,message:"Sélectionnez un role",type:"is-warning"}),t.next=17;break;case 4:return t.prev=4,this.loading=!0,t.next=8,this.$axios.$patch("/api/make-".concat(this.role,"/").concat(this.user.id));case 8:this.user[this.role]=!0,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),t.t0.response?this.$toast.open({duration:5e3,message:"Un erreur est survenue.",type:"is-warning"}):this.$toast.open({duration:5e3,message:"Une erreur est survenue, le serveur est inacsesible !",type:"is-danger"});case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[4,11,14,17]])}));return function(){return t.apply(this,arguments)}}()}},i=s(9),o=Object(i.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column is-half"},[s("div",{staticClass:"box"},[s("h2",{staticClass:"title"},[t._v("\n      "+t._s(t.user.username)+"\n    ")]),t._v(" "),s("div",{staticClass:"tags are-medium"},[t.user.admin?s("span",{staticClass:"tag is-link"},[t._v("\n        Administrateur\n      ")]):t._e(),t._v(" "),t.user.creator?s("span",{staticClass:"tag is-info"},[t._v("\n        Créateur\n      ")]):t._e(),t._v(" "),t.user.guest?s("span",{staticClass:"tag is-primary"},[t._v("\n        Invité\n      ")]):t._e()]),t._v(" "),s("h3",{staticClass:"title is-6"},[t._v("Ajouter un role")]),t._v(" "),s("b-field",[s("p",{staticClass:"control"},[s("b-dropdown",{model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},[s("button",{staticClass:"button",attrs:{slot:"trigger"},slot:"trigger"},["admin"==t.role?[s("span",[t._v("Administrateur")])]:"creator"==t.role?[s("span",[t._v("Créateur")])]:"guest"==t.role?[s("span",[t._v("Invité")])]:[s("span",[t._v("Selectionnez")])],t._v(" "),s("b-icon",{attrs:{icon:"menu-down"}})],2),t._v(" "),s("b-dropdown-item",{attrs:{value:"admin"}},[t._v("Administrateur")]),t._v(" "),s("b-dropdown-item",{attrs:{value:"creator"}},[t._v("Créateur")]),t._v(" "),s("b-dropdown-item",{attrs:{value:"guest"}},[t._v("Invité")])],1)],1),t._v(" "),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-dark",attrs:{loading:t.loading},on:{click:function(e){t.addRole()}}},[s("b-icon",{attrs:{icon:"plus-box"}}),t._v(" "),s("span",[t._v("Ajouter")])],1)])])],1)])},[],!1,null,null,null);o.options.__file="UserBox.vue";var u={components:{UserBox:o.exports},asyncData:function(){var t=r()(regeneratorRuntime.mark(function t(e){var s,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.$axios,t.next=3,s.$get("/api/users");case 3:return n=t.sent,t.abrupt("return",{users:n.users});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},l=Object(i.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-multiline"},this._l(this.users,function(t){return e("UserBox",{key:t.id,attrs:{user:t}})}),1)])])},[],!1,null,null,null);l.options.__file="list.vue";e.default=l.exports}}]);